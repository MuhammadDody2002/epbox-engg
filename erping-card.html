<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EPBOX ENGINEERING - Erping Lee vCard</title>
    <link rel="stylesheet" href="irene-vcard-plus.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <div class="vcard">
            <!-- Left: Logo -->
            <div class="left-section">
                <div class="logo-wrap">
                    <img src="images/logo2.png" alt="EPBOX Logo" class="logo-image">
                </div>
                
                <!-- Decorative Dots -->
                <div class="dots bottom-dots">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>

            <!-- Right: Identity -->
            <div class="right-section">
                <div class="pattern-bg"></div>
                <!-- Header -->
                <div class="company-header">
                    <div class="company-icon" aria-hidden="true">
                        <i class="fas fa-table-columns"></i>
                    </div>
                    <h1 class="company-name" aria-label="Company Name">EPBOX ENGINEERING PTE LTD.</h1>
                    <button class="mode-toggle" type="button" aria-label="Toggle dark mode">
                        <i class="fas fa-moon"></i>
                    </button>
                </div>

        
                <!-- Motto -->
                <div class="slogan" aria-label="Company Motto">
                    <p>Beyond Boundaries, We Command Control</p>
                    <div class="slogan-line"></div>
                </div>

                <!-- Identity -->
                <div class="identity-card">
                    <div class="person-name">Erping Lee</div>
                    <div class="person-title">Director | EPBOX ENGINEERING PTE LTD.</div>
                </div>

                <!-- Contacts + QR Code Row -->
                <div class="contact-qr-row">
                    <!-- Contacts -->
                    <div class="contact-info">
                        <div class="contact-item phone" tabindex="0">
                            <i class="fas fa-phone"></i>
                            <a href="tel:+6582829835" class="contact-link" aria-label="Call phone">+65 8282 9835 / +62 811 1112 9835
                            </a>
                        </div>
                        <div class="contact-item email" tabindex="0">
                            <i class="fas fa-envelope"></i>
                            <a href="mailto:erping@epbox-engg.com" class="contact-link" aria-label="Send email">erping@epbox-engg.com</a>
                        </div>
                        <div class="contact-item location" tabindex="0">
                            <i class="fas fa-map-marker-alt"></i>
                            <a href="https://www.google.com/maps/search/?api=1&query=1%20Sunview%20Roadf%20Ecotect%40sunview%20Singapore%20627615" target="_blank" rel="noopener" class="contact-link" aria-label="Open address in maps">1 Sunview Roadf Ecotect@sunview Singapore 627615</a>
                        </div>

                        <div class="contact-item website" tabindex="0">
                            <i class="fas fa-globe"></i>
                            <a href="https://epbox-engg.com" target="_blank" rel="noopener" class="contact-link" aria-label="Visit website">https//:epbox-engg.com</a>
                        </div>
                    </div>

                    <!-- QR Code + Save Contact Button -->
                    <div class="qr-code-side">
                                                 <!-- Floating ISO Badge overlay (not part of grid flow) -->
                         <div class="iso-badge-container" onclick="showIsoInfo()" title="Click to view ISO certification details">
                             <div class="iso-badge">
                                 <img src="images/iso2.png" alt="ISO 9001 Certification" class="iso-badge-image">
                             </div>
                         </div>

                        <img src="images/qre.png" alt="QR Code vCard" class="qr-code-image" onclick="showQrModal()">
                        
                                                 <!-- Save Contact Button -->
                         <button class="save-contact-btn" onclick="showVCardPreview()" aria-label="Preview vCard contact">
                             <i class="fas fa-download"></i>
                             Save Contact
                         </button>
                    </div>
                </div>

                <!-- ISO Info Modal -->
                <div id="isoModal" class="iso-modal">
                    <div class="iso-modal-content">
                        <div class="iso-modal-header">
                            <h3>ISO 9001:2015 Quality Management</h3>
                            <button class="iso-modal-close" onclick="closeIsoInfo()" aria-label="Close modal">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="iso-modal-body">
                            <p class="iso-description">
                                <strong>EPBOX ENGINEERING PTE. LTD</strong> is certified to ISO 9001:2015 standards, demonstrating our commitment to quality management and continuous improvement in all our processes and services.
                            </p>
                            <div class="iso-benefits">
                                <h4>Certification Benefits:</h4>
                                <ul>
                                    <li>Consistent quality standards</li>
                                    <li>Customer satisfaction focus</li>
                                    <li>Continuous process improvement</li>
                                    <li>International recognition</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                                 <!-- QR Scan Modal -->
                 <div id="qrModal" class="iso-modal" role="dialog" aria-modal="true" aria-labelledby="qrModalTitle">
                     <div class="iso-modal-content">
                         <div class="iso-modal-header">
                             <h3 id="qrModalTitle">Scan Here</h3>
                             <button class="iso-modal-close" onclick="closeQrModal()" aria-label="Close modal">
                                 <i class="fas fa-times"></i>
                             </button>
                         </div>
                         <div class="iso-modal-body" style="text-align:center">
                             <img src="images/qre.png" alt="QR Code" style="width:220px;height:220px;border-radius:12px;background:#fff;padding:8px;box-shadow:0 8px 24px rgba(0,0,0,.1);border:2px solid rgba(26,54,93,.1)">
                             <p class="iso-description" style="margin-top:12px">Point your camera here to open our contact and save it instantly.</p>
                         </div>
                     </div>
                 </div>

                 <!-- vCard Preview Modal -->
                 <div id="vcardModal" class="iso-modal" role="dialog" aria-modal="true" aria-labelledby="vcardModalTitle">
                     <div class="iso-modal-content vcard-preview-content">
                         <div class="iso-modal-header">
                             <h3 id="vcardModalTitle">Contact Preview</h3>
                             <button class="iso-modal-close" onclick="closeVCardPreview()" aria-label="Close modal">
                                 <i class="fas fa-times"></i>
                             </button>
                         </div>
                         <div class="iso-modal-body vcard-preview-body">
                             <div class="vcard-preview-card">
                                 <div class="vcard-preview-avatar">
                                     <div class="vcard-initials">EL</div>
                                 </div>
                                 <div class="vcard-preview-info">
                                     <h4 class="vcard-preview-name">Erping Lee</h4>
                                     <p class="vcard-preview-title">Director | EPBOX ENGINEERING PTE LTD.</p>
                                     <div class="vcard-preview-details">
                                         <div class="vcard-detail-item">
                                             <i class="fas fa-phone"></i>
                                             <span>+65 8348 9826</span>
                                         </div>
                                         <div class="vcard-detail-item">
                                             <i class="fas fa-envelope"></i>
                                             <span>erping@epbox-engg.com</span>
                                         </div>
                                         <div class="vcard-detail-item">
                                             <i class="fas fa-map-marker-alt"></i>
                                             <span>1 Sunview Road Eco-Tech@Sunview Singapore 627615</span>
                                         </div>
                                         <div class="vcard-detail-item">
                                             <i class="fas fa-globe"></i>
                                             <span>https://epbox-engg.com</span>
                                         </div>
                                     </div>
                                 </div>
                             </div>
                             <div class="vcard-preview-actions">
                                 <button class="vcard-save-btn" onclick="downloadVCard()">
                                     <i class="fas fa-download"></i>
                                     Save to Contacts
                                 </button>
                             </div>
                         </div>
                     </div>
                 </div>
            </div>

            <div class="border-strip top-strip"></div>
            <div class="border-strip bottom-strip"></div>
        </div>
    </div>

    <script>
    (function(){
        const modeBtn = document.querySelector('.mode-toggle');
        if (modeBtn) {
            modeBtn.addEventListener('click', function(){
                document.body.classList.toggle('dark');
            });
        }
    })();

    // Download vCard Function
    function downloadVCard() {
        // Generate vCard string untuk Erping Lee
        const vcardData = `BEGIN:VCARD
VERSION:3.0
FN:Erping Lee
N:Lee;Erping;;;
ORG:EPBOX ENGINEERING PTE. LTD.
TITLE:Director
TEL;TYPE=WORK:+65-8282-9835
TEL;TYPE=CELL:+65-8282-9835
EMAIL;TYPE=WORK:erping@epbox-engg.com
ADR;TYPE=WORK:;;1 Sunview Roadf Ecotect@sunview;Singapore;Singapore;627615;Singapore
URL:https://epbox-engg.com
NOTE:Director at EPBOX ENGINEERING PTE. LTD. - Beyond Boundaries, We Command Control
REV:${new Date().toISOString().split('T')[0]}T00:00:00Z
END:VCARD`;

        try {
            // Create download link
            const blob = new Blob([vcardData], { type: 'text/vcard' });
            const url = window.URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'erping-lee-contact.vcf';
            
            // Trigger download
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            // Cleanup
            window.URL.revokeObjectURL(url);
            
            // Show success message
            showNotification('✅ Contact saved successfully!', 'success');
            
        } catch (error) {
            console.error('Error downloading vCard:', error);
            showNotification('❌ Failed to save contact', 'error');
        }
    }

    // Notification function
    function showNotification(message, type = 'info') {
        // Remove existing notification
        const existingNotification = document.querySelector('.notification');
        if (existingNotification) {
            existingNotification.remove();
        }

        // Create notification element
        const notification = document.createElement('div');
        notification.className = `notification notification-${type}`;
        notification.innerHTML = `
            <div class="notification-content">
                <span class="notification-message">${message}</span>
                <button class="notification-close" onclick="this.parentElement.parentElement.remove()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        `;

        // Add to body
        document.body.appendChild(notification);

        // Auto remove after 3 seconds
        setTimeout(() => {
            if (notification.parentElement) {
                notification.remove();
            }
        }, 3000);
    }

    // ISO Info Modal Functions
    function showIsoInfo() {
        const modal = document.getElementById('isoModal');
        if (modal) {
            modal.style.display = 'block';
        }
    }

    function closeIsoInfo() {
        const modal = document.getElementById('isoModal');
        if (modal) {
            modal.style.display = 'none';
        }
    }

    // vCard Preview Modal Functions
    function showVCardPreview() {
        const modal = document.getElementById('vcardModal');
        if (modal) {
            modal.style.display = 'block';
        }
    }

    function closeVCardPreview() {
        const modal = document.getElementById('vcardModal');
        if (modal) {
            modal.style.display = 'none';
        }
    }

    // QR Modal handlers
    function showQrModal(){
        const qrModal = document.getElementById('qrModal');
        if (qrModal) qrModal.style.display = 'block';
    }
    function closeQrModal(){
        const qrModal = document.getElementById('qrModal');
        if (qrModal) qrModal.style.display = 'none';
    }

    // Close modal when clicking outside the modal content
    window.onclick = function(event) {
        const isoModal = document.getElementById('isoModal');
        const qrModal = document.getElementById('qrModal');
        const vcardModal = document.getElementById('vcardModal');
        
        if (event.target == isoModal) {
            isoModal.style.display = 'none';
        }
        if (event.target == qrModal) {
            qrModal.style.display = 'none';
        }
        if (event.target == vcardModal) {
            vcardModal.style.display = 'none';
        }
    }
    </script>
</body>
</html>
